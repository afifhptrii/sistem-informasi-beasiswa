<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notifikasi — Sistem Informasi Beasiswa</title>
  <style>
    :root{--bg:#f6f8fb;--card:#fff;--accent:#2563eb;--muted:#6b7280}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:var(--bg);color:#111}
    .container{max-width:900px;margin:36px auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between}
    h1{font-size:20px;margin:0}

    /* bell */
    .bell{position:relative;cursor:pointer}
    .badge{position:absolute;top:-6px;right:-6px;background:#ef4444;color:#fff;border-radius:999px;padding:3px 7px;font-size:12px}

    /* dropdown */
    .dropdown{position:relative}
    .panel{position:absolute;right:0;top:42px;width:340px;max-height:380px;overflow:auto;background:var(--card);box-shadow:0 8px 24px rgba(17,24,39,0.12);border-radius:10px;padding:8px;display:none}
    .panel.open{display:block}
    .panel .controls{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-bottom:1px solid #eee}
    .panel .list{list-style:none;margin:0;padding:0}
    .item{display:flex;gap:10px;padding:12px;border-radius:8px;align-items:flex-start;border:1px solid transparent}
    .item.unread{background:linear-gradient(90deg,#eef2ff, #fff);border-color:#e6f0ff}
    .item .dot{width:10px;height:10px;border-radius:999px;margin-top:6px;background:#10b981}
    .item .content{flex:1}
    .item .title{font-weight:600;margin:0 0 4px 0}
    .item .meta{font-size:12px;color:var(--muted)}

    /* toast */
    .toasts{position:fixed;left:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:999}
    .toast{background:#111;color:#fff;padding:10px 14px;border-radius:8px;min-width:240px;box-shadow:0 8px 20px rgba(2,6,23,0.2)}

    /* buttons */
    button{background:var(--accent);color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer}
    .btn-ghost{background:transparent;color:var(--accent);border:1px solid #e6eefc}

    /* responsive */
    @media (max-width:420px){.panel{right:8px;left:8px;width:unset}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Notifikasi</h1>
      <div style="display:flex;gap:12px;align-items:center">
        <button id="newNotifBtn" title="Tambah notifikasi">+ Notifikasi baru</button>
        <div class="dropdown">
          <div class="bell" id="bellBtn" aria-haspopup="true" aria-expanded="false">
            <!-- simple bell icon (SVG) -->
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M15 17H9" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2z" stroke="#111" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M18 8a6 6 0 1 0-12 0c0 7-3 6-3 8h18c0-2-3  -1-3-8z" stroke="#111" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="badge" id="unreadCount">0</span>
          </div>

          <div class="panel" id="panel">
            <div class="controls">
              <strong>Notifikasi</strong>
              <div>
                <button class="btn-ghost" id="markAll">Tandai semua terbaca</button>
              </div>
            </div>
            <ul class="list" id="list">
              <!-- items injected by JS -->
            </ul>
            <div style="padding:8px 12px;border-top:1px solid #f1f5f9;text-align:center;font-size:13px;color:var(--muted)">Tidak ada notifikasi lagi</div>
          </div>
        </div>
      </div>
    </header>

    <main style="margin-top:20px">
      <p>Contoh halaman notifikasi yang sederhana. Klik ikon lonceng untuk membuka daftar notifikasi, atau klik <strong>+ Notifikasi baru</strong> untuk menambahkan notifikasi (simulasi).</p>
    </main>
  </div>

  <div class="toasts" id="toasts" aria-live="polite"></div>

  <script>
    // Simple in-memory notification store
    const store = [];
    const listEl = document.getElementById('list');
    const panelEl = document.getElementById('panel');
    const bellBtn = document.getElementById('bellBtn');
    const unreadCountEl = document.getElementById('unreadCount');
    const toasts = document.getElementById('toasts');

    function renderList() {
      listEl.innerHTML = '';
      if (store.length === 0) {
        listEl.innerHTML = '<li style="padding:12px;color:var(--muted);text-align:center">Belum ada notifikasi</li>';
      }
      store.slice().reverse().forEach((n, idx) => {
        const li = document.createElement('li');
        li.className = 'item ' + (n.read ? '' : 'unread');
        li.innerHTML = `
          <div class="dot" style="background:${n.level==='info'?'#60a5fa':'#fb923c'}"></div>
          <div class="content">
            <p class="title">${escapeHtml(n.title)}</p>
            <div class="meta">${escapeHtml(n.message)} • <span>${timeAgo(n.time)}</span></div>
          </div>
        `;
        li.addEventListener('click', () => { n.read = true; renderList(); updateUnread(); });
        listEl.appendChild(li);
      });
    }

    function updateUnread(){
      const unread = store.filter(s=>!s.read).length;
      unreadCountEl.textContent = unread;
      unreadCountEl.style.display = unread>0? 'inline-block':'none';
    }

    function addNotification(title, message, level='info'){
      const n = {title, message, level, time: Date.now(), read:false};
      store.push(n);
      showToast(n);
      renderList();
      updateUnread();
    }

    function showToast(n){
      const t = document.createElement('div');
      t.className = 'toast';
      t.textContent = n.title + ' — ' + n.message;
      toasts.appendChild(t);
      setTimeout(()=>{ t.style.opacity = '0'; t.style.transform='translateY(8px)'; setTimeout(()=>t.remove(),400)}, 3500);
    }

    // small utilities
    function escapeHtml(s){ return String(s).replace(/[&<>\"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;" })[c]); }
    function timeAgo(ts){
      const s = Math.floor((Date.now()-ts)/1000);
      if (s<60) return s+' detik yang lalu';
      const m = Math.floor(s/60); if (m<60) return m+' menit yang lalu';
      const h = Math.floor(m/60); if (h<24) return h+' jam yang lalu';
      const d = Math.floor(h/24); return d+' hari yang lalu';
    }

    // interactions
    bellBtn.addEventListener('click', (e)=>{
      panelEl.classList.toggle('open');
      const expanded = panelEl.classList.contains('open');
      bellBtn.setAttribute('aria-expanded', expanded);
    });

    document.getElementById('newNotifBtn').addEventListener('click', ()=>{
      const rnd = Math.random();
      if (rnd<0.5) addNotification('Pendaftaran diterima','Selamat! Pengajuan beasiswa Anda diterima. Silakan cek detail di dashboard.');
      else addNotification('Dokumen kurang','Terdapat dokumen yang belum lengkap. Mohon lengkapi sebelum batas waktu.','warning');
    });

    document.getElementById('markAll').addEventListener('click', ()=>{
      store.forEach(s=>s.read=true);
      renderList(); updateUnread();
    });

    // seed some sample notifications
    addNotification('Selamat datang','Notifikasi siap digunakan.');
    addNotification('Pengumuman', 'Sesi tanya jawab akan dimulai pukul 15:00.');

    // close panel when clicking outside
    document.addEventListener('click', (e)=>{
      if (!panelEl.contains(e.target) && !bellBtn.contains(e.target)) panelEl.classList.remove('open');
    });

  </script>
</body>
</html>